<div class="container mx-auto px-4 py-8">
  <button
    routerLink="/products"
    class="mb-6 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
  >
    Back to Products
  </button>

  @if (product$ | async; as product) {
  <div
    class="grid grid-cols-1 lg:grid-cols-2 gap-8 bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"
  >
    <!-- Product Image -->
    <img [src]="product.thumbnail" [alt]="product.title" class="rounded-lg" />

    <!-- Product Info -->
    <div>
      <h1 class="text-3xl font-bold mb-4 dark:text-white">
        {{ product.title }}
      </h1>

      <div class="flex items-center gap-4 mb-4">
        <span class="text-3xl font-bold text-blue-600 dark:text-blue-400">
          {{ product.finalPrice | currencyFormat }}
        </span>

        <span class="text-xl text-gray-500 line-through">
          {{ product.price | currencyFormat }}
        </span>

        <span class="text-sm bg-green-100 text-green-800 px-2 py-1 rounded">
          {{ product.discountPercentage }}% OFF
        </span>
      </div>

      <div class="mb-4 text-yellow-500">‚≠ê {{ product.rating }}</div>

      <p class="text-gray-700 dark:text-gray-300 mb-6">
        {{ product.description }}
      </p>

      <div class="space-y-2 dark:text-gray-300">
        <div><strong>Brand:</strong> {{ product.brand }}</div>
        <div><strong>Category:</strong> {{ product.category }}</div>
        <div><strong>Stock:</strong> {{ product.stock }} units</div>
      </div>
    </div>
  </div>

  <!-- Sales Chart -->
  <div class="mt-8">
    <app-product-chart-component
      [salesData]="product.monthlySalesData"
      [productName]="product.title"
    />
  </div>
  } @else {
  <app-loading-spinner />
  }
</div>
